/*
ROT Developers and Contributors:
Moises (OWNER/CEO), 
TRASH (DEVELOPER),
notbeer (Most of ROT's Structure code)
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
__________ ___________________
\______   \\_____  \__    ___/
 |       _/ /   |   \|    |   
 |    |   \/    |    \    |   
 |____|_  /\_______  /____|   
        \/         \/         
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
© Copyright 2021 all rights reserved by Moisesgamingtv9. Do NOT steal, copy the code, or claim it as yours\u0021
Please message moisesgamingtv9#8583 on Discord, or join the ROT discord: https://discord.com/invite/2ADBWfcC6S
Website: https://rotmc.netlify.app/index.html
Docs: https://docs.google.com/document/d/1hasFU7_6VOBfjXrQ7BE_mTzwacOQs5HC21MJNaraVgg
Thank you
*/import { Server, setTickInterval, Lang, } from '../../../Minecraft.js';
const CMDTname: string = `tpa`;
const registerInformation = {
    cancelMessage: true,
    name: `${CMDname}`,
    description: `When you type ${Server.CP}${CMDname} in chat, you'll use TPA`,
    usage: `${CMDname} Send | Accept`,
    example: [
        `${CMDname} send §7(This will open a cool menu of the people you can send TPAs to)§r`,
        `${CMDname} accept §7(This will open a cool menu of the TPAs you can accept)§r`
    ]
};
Server.command.register(registerInformation, (chatmsg, args) => {
    if(!Server.player.find(chatmsg.sender.nameTag)) return null;
    if(!Server.player.findTag('rot', chatmsg.sender.nameTag)) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`, `tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.setupa}"}]}`]);
    if(!Server.entity.getScore(`cl${CMDname}`, '[type=rot:cl]', { minimum: 0, maximum: 0 })) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`, `tellraw @a[name="${chatmsg.sender.nameTag}",tag=!v] {"rawtext":[{"text":"${Lang.CMDnotOna1}${CMDname}${Lang.CMDnotOna2}"}]}`, `tellraw @a[name="${chatmsg.sender.nameTag}",tag=v] {"rawtext":[{"text":"${Lang.CMDnotOnb1}${CMDname}${Lang.CMDnotOnb2}${CMDname}${Lang.CMDnotOnb3}"}]}`]);
    if(Server.player.getScore('clcmd', `${chatmsg.sender.nameTag}`, { minimum: 1, maximum: 3 })) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`, `execute @a[name="${chatmsg.sender.nameTag}"] ~~~ tellraw @s {"rawtext":[{"text":"${Lang.antispam}"}]}`]);
    Server.runCommands([`scoreboard players set @a[name="${chatmsg.sender.nameTag}"] clcmdc 0`, `execute @e[type=rot:cl,scores={cl${CMDname}=!2}] ~~~ scoreboard players set @a[name="${chatmsg.sender.nameTag}"] clcmdc 1`, `execute @e[type=rot:cl,scores={cl${CMDname}=2}] ~~~ scoreboard players set @a[name="${chatmsg.sender.nameTag}",tag=t] clcmdc 1`]);
    if(!Server.player.getScore('clcmdc', `${chatmsg.sender.nameTag}`, { maximum: 0 })) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`, `tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.noT}"}]}`]);
    Server.runCommands([`scoreboard players set @a[name="${chatmsg.sender.nameTag}",m=!c] clcmd 3`]);
    if(Server.player.findTag('last_hit_by_player', chatmsg.sender.nameTag)) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`, `tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.anticmdpvp}"}]}`]);
    let tpaSend = ['send', 'sender', 'to', 'invite','a'];let tpaAccept = ['accept', 'join'];let tpaEveryone = ['all', 'everyone','whole','@a'];
    if(!args.length || tpaSend.includes(args[0])) {
        if(!Server.entity.getScore('clpl','[type=rot:cl]',{ maximum: 0 })) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0063\u0049\u0074 \u0064\u006f\u0065\u0073\u006e\u0027\u0074 \u0073\u0065\u0065\u006d \u006c\u0069\u006b\u0065 \u0079\u006f\u0075 \u0068\u0061\u0076\u0065 \u0061\u006e\u0079 \u0066\u0072\u0069\u0065\u006e\u0064\u0073 \u0069\u006e \u0074\u0068\u0065 \u0067\u0061\u006d\u0065\u002e\u002e\u002e \u00a7\u0038\u0049\u006d\u0061\u0067\u0069\u006e\u0065 \u006e\u006f\u0074 \u0068\u0061\u0076\u0069\u006e\u0067 \u0066\u0072\u0069\u0065\u006e\u0064\u0073 \u006c\u006f\u006c"}]}`]);
        if(args.slice(1).join(' ') == chatmsg.sender.nameTag) return Server.runCommands([`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0063\u0059\u006f\u0075 \u0063\u0061\u006e\u006e\u006f\u0074 \u0073\u0065\u006e\u0064 \u0061 \u0054\u0050\u0041 \u0074\u006f \u0079\u006f\u0075\u0072\u0073\u0065\u006c\u0066\u002e"}]}`]);
        if(!Server.player.find(args.slice(1).join(' '))) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0063\u0048\u0075\u0068\u002e\u002e\u002e \u0049\u0027\u006d \u0055\u006e\u0061\u0062\u006c\u0065 \u0074\u006f \u0066\u0069\u006e\u0064 \u0074\u0068\u0061\u0074 \u0070\u006c\u0061\u0079\u0065\u0072\u002e \u0044\u0069\u0064 \u0079\u006f\u0075 \u0073\u0070\u0065\u006c\u006c \u0069\u0074 \u0063\u006f\u0072\u0072\u0065\u0063\u0074\u006c\u0079 \u0061\u006e\u0064 \u0069\u0073 \u0074\u0068\u0061\u0074 \u0070\u006c\u0061\u0079\u0065\u0072 \u0065\u0076\u0065\u006e \u0069\u006e \u0074\u0068\u0065 \u0067\u0061\u006d\u0065\u003f"}]}`]);
        Server.runCommands([`playsound random.toast @a[name="${chatmsg.sender.nameTag}"] ~~~ 1 0.5`,`playsound random.toast @a[name="${args.slice(1).join(' ')}"] ~~~ 1 0.5`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0061\u0049 \u0068\u0061\u0076\u0065 \u0073\u0065\u006e\u0074 \u0061 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074 \u0074\u006f \u00a7\u0036\u00a7\u006c${args.slice(1).join(' ')}\u00a7\u0072\u00a7\u0061\u0021 \u0054\u0068\u0065\u0079 \u0068\u0061\u0076\u0065 \u00a7\u0063\u0031\u00a7\u0061 \u006d\u0069\u006e\u0075\u0074\u0065 \u0074\u006f \u0061\u0063\u0063\u0065\u0070\u0074 \u0069\u0074\u002e"}]}`,`tellraw @a[name="${args.slice(1).join(' ')}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u006c\u00a7\u0036${chatmsg.sender.nameTag}\u00a7\u0072\u00a7\u0061\u0053\u0065\u006e\u0074 \u0079\u006f\u0075 \u0061 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074\u002e \u0059\u006f\u0075 \u0063\u0061\u006e \u0061\u0063\u0063\u0065\u0070\u0074 \u0069\u0074 \u0062\u0079 \u0074\u0079\u0070\u0069\u006e\u0067 \u005c\u0022\u00a7\u0037${Server.CP}\u0074\u0070\u0061 \u0061\u0063\u0063\u0065\u0070\u0074 ${chatmsg.sender.nameTag}\u00a7\u0072\u00a7\u0061\u005c\u0022 \u0069\u006e \u0063\u0068\u0061\u0074\u0021"}]}`]);
    } else if(tpaAccept.includes(args[0])) {
        if(!Server.entity.getScore('clpl','[type=rot:cl]',{ maximum: 0 })) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0063\u0049\u0074 \u0064\u006f\u0065\u0073\u006e\u0027\u0074 \u0073\u0065\u0065\u006d \u006c\u0069\u006b\u0065 \u0079\u006f\u0075 \u0068\u0061\u0076\u0065 \u0061\u006e\u0079 \u0066\u0072\u0069\u0065\u006e\u0064\u0073 \u0069\u006e \u0074\u0068\u0065 \u0067\u0061\u006d\u0065\u002e\u002e\u002e \u00a7\u0038\u0049\u006d\u0061\u0067\u0069\u006e\u0065 \u006e\u006f\u0074 \u0068\u0061\u0076\u0069\u006e\u0067 \u0066\u0072\u0069\u0065\u006e\u0064\u0073 \u006c\u006f\u006c"}]}`]);
        if(!Server.player.findTag('cltpar', chatmsg.sender.nameTag)) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":""${Lang.MSC} \u00a7\u0065\u0050\u0075\u006c\u006c\u0069\u006e\u0067 \u0074\u0068\u0065 \u0070\u006c\u0061\u0079\u0065\u0072\u0073 \u0074\u0068\u0061\u0074 \u0073\u0065\u006e\u0074 \u0079\u006f\u0075 \u0061 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074\u002e\u002e\u002e\n\u00a7\u0063\u0049\u0074 \u0073\u0065\u0065\u006d\u0073 \u006c\u0069\u006b\u0065 \u0079\u006f\u0075 \u0064\u006f\u006e\u0027\u0074 \u0068\u0061\u0076\u0065 \u0061\u006e\u0079 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074\u0073 \u0066\u0072\u006f\u006d \u006f\u0074\u0068\u0065\u0072 \u0070\u006c\u0061\u0079\u0065\u0072\u0073\u002e \u0054\u0068\u0069\u0073 \u0069\u0073 \u0065\u0069\u0074\u0068\u0065\u0072 \u0062\u0065\u0063\u0061\u0073\u0075\u0065 \u0079\u006f\u0075 \u0064\u0069\u0064\u006e\u0027\u0074 \u0061\u0063\u0063\u0065\u0070\u0074 \u0074\u0068\u0065\u0069\u0072 \u0072\u0065\u0071\u0075\u0065\u0073\u0074 \u0066\u0061\u0073\u0074 \u0065\u006e\u006f\u0075\u0067\u0068\u002c \u006f\u0072 \u0079\u006f\u0075 \u006a\u0075\u0073\u0074 \u0064\u006f\u006e\u0027\u0074 \u0068\u0061\u0076\u0065 \u0061\u006e\u0079 \u0066\u0072\u0069\u0065\u006e\u0064\u0073\u002e}]}`]);
        if(!Server.player.find(args.slice(1).join(' '))) return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0063\u0048\u0075\u0068\u002e\u002e\u002e \u0049\u0027\u006d \u0055\u006e\u0061\u0062\u006c\u0065 \u0074\u006f \u0066\u0069\u006e\u0064 \u0074\u0068\u0061\u0074 \u0070\u006c\u0061\u0079\u0065\u0072\u002e \u0044\u0069\u0064 \u0079\u006f\u0075 \u0073\u0070\u0065\u006c\u006c \u0069\u0074 \u0063\u006f\u0072\u0072\u0065\u0063\u0074\u006c\u0079 \u0061\u006e\u0064 \u0069\u0073 \u0074\u0068\u0061\u0074 \u0070\u006c\u0061\u0079\u0065\u0072 \u0065\u0076\u0065\u006e \u0069\u006e \u0074\u0068\u0065 \u0067\u0061\u006d\u0065\u003f"}]}`]);
        const atpap = args.slice(1).join(' ');
        Server.runCommands([`playsound random.toast @a[name="${chatmsg.sender.nameTag}"] ~~~ 1 0.5`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.MSC} \u00a7\u0065\u0054\u0065\u006c\u0065\u0070\u006f\u0072\u0074\u0069\u006e\u0067 \u0079\u006f\u0075 \u0074\u006f \u00a7\u0036\u00a7\u006c${atpap}\u00a7\u0072\u00a7\u0065\u002e\u002e\u002e\n\u00a7\u0061\u0057\u006f\u006f\u0073\u0068\u0021"}]}`,`tag @s[]`]);
    } else return Server.runCommands([`playsound random.glass @a[name="${chatmsg.sender.nameTag}"]`,`tellraw @a[name="${chatmsg.sender.nameTag}"] {"rawtext":[{"text":"${Lang.error2}"}]}`]);
});
setTickInterval(function() {
    const tpas1 = '\u00a7\u0065\u0055\u006e\u0066\u006f\u0072\u0074\u0075\u006e\u0061\u0074\u0065\u006c\u0079\u002e\u002e\u002e \u0049\u0074 \u0068\u0061\u0073 \u0062\u0065\u0065\u006e \u0034\u0035 \u0073\u0065\u0063\u006f\u006e\u0064\u0073\u002c \u0061\u006e\u0064 \u00a7\u0063\u00a7\u006c';
    const tpas2 = '\u00a7\u0072\u00a7\u0065 \u0064\u0069\u0064\u006e\u0027\u0074 \u0061\u0063\u0063\u0065\u0070\u0074 \u0079\u006f\u0075\u0072 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074 \u0073\u006f \u0069\u0074 \u0068\u0061\u0073 \u0062\u0065\u0065\u006e \u0063\u0061\u006e\u0063\u0065\u006c\u0065\u0064\u002e \u003a\u0028';
    const tpaa1 = '\u00a7\u0065\u0059\u006f\u0075 \u0064\u0069\u0064\u006e\u0027\u0074 \u0061\u0063\u0063\u0065\u0070\u0074 \u00a7\u0063\u00a7\u006c';
    const tpaa2 = '\u0027\u0073\u00a7\u0072\u00a7\u0065 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074 \u0069\u006e \u0074\u0069\u006d\u0065 \u0073\u006f \u0069\u0074 \u0067\u006f\u0074 \u0064\u0065\u006c\u0065\u0074\u0065\u0064\u002e \u0049\u0066 \u0063\u0061\u0073\u0065 \u0079\u006f\u0075 \u0064\u006f\u006e\u0027\u0074 \u006b\u006e\u006f\u0077 \u0068\u006f\u0077 \u0074\u006f \u0061\u0063\u0063\u0065\u0070\u0074 \u0061 \u0054\u0050\u0041 \u0072\u0065\u0071\u0075\u0065\u0073\u0074\u002c \u0079\u006f\u0075 \u006e\u0065\u0065\u0064 \u0074\u006f \u0074\u0079\u0070\u0065 \u005c\u0022\u00a7\u0037\u0021\u0074\u0070\u0061 \u0061\u0063\u0063\u0065\u0070\u0074 \u00a7\u0038\u005b\u0070\u006c\u0061\u0079\u0065\u0072 \u006e\u0061\u006d\u0065\u005d\u00a7\u0065\u005c\u0022 \u0069\u006e \u0063\u0068\u0061\u0074 \u0074\u006f \u0061\u0063\u0063\u0065\u0070\u0074\u002e';
    Server.runCommands([`tellraw @a[scores={clline1=-43}] {"rawtext":[{"text":"${Lang.MSC} ${tpas1}"},{"selector":"@a[scores={clline1=2}]"},{"text":"${tpas2}"}]}`,`tellraw @a[scores={clline2=-43}] {"rawtext":[{"text":"${Lang.MSC} ${tpas1}"},{"selector":"@a[scores={clline2=2}]"},{"text":"${tpas2}"}]}`,`tellraw @a[scores={clline3=-43}] {"rawtext":[{"text":"${Lang.MSC} ${tpas1}"},{"selector":"@a[scores={clline3=2}]"},{"text":"${tpas2}"}]}`,`tellraw @a[scores={clline4=-43}] {"rawtext":[{"text":"${Lang.MSC} ${tpas1}"},{"selector":"@a[scores={clline4=2}]"},{"text":"${tpas2}"}]}`,`tellraw @a[scores={clline5=-43}] {"rawtext":[{"text":"${Lang.MSC} ${tpas1}"},{"selector":"@a[scores={clline5=2}]"},{"text":"${tpas2}"}]}`,`execute @a[scores={clline1=-43}] ~~~ tellraw @a[scores={clline1=2}] {"rawtext":[{"text":"${Lang.MSC} ${tpaa1}"},{"selector":"@a[scores={clline1=-43}]"},{"text":"${tpaa2}"}]}`,`execute @a[scores={clline2=-43}] ~~~ tellraw @a[scores={clline2=2}] {"rawtext":[{"text":"${Lang.MSC} ${tpaa1}"},{"selector":"@a[scores={clline2=-43}]"},{"text":"${tpaa2}"}]}`,`execute @a[scores={clline3=-43}] ~~~ tellraw @a[scores={clline3=2}] {"rawtext":[{"text":"${Lang.MSC} ${tpaa1}"},{"selector":"@a[scores={clline3=-43}]"},{"text":"${tpaa2}"}]}`,`execute @a[scores={clline4=-43}] ~~~ tellraw @a[scores={clline4=2}] {"rawtext":[{"text":"${Lang.MSC} ${tpaa1}"},{"selector":"@a[scores={clline4=-43}]"},{"text":"${tpaa2}"}]}`,`execute @a[scores={clline5=-43}] ~~~ tellraw @a[scores={clline5=2}] {"rawtext":[{"text":"${Lang.MSC} ${tpaa1}"},{"selector":"@a[scores={clline5=-43}]"},{"text":"${tpaa2}"}]}`,`execute @a[scores={clline1=-43}] ~~~ scoreboard players set @s cltpa 10`,`execute @a[scores={clline2=-43}] ~~~ scoreboard players set @s cltpa 10`,`execute @a[scores={clline3=-43}] ~~~ scoreboard players set @s cltpa 10`,`execute @a[scores={clline4=-43}] ~~~ scoreboard players set @s cltpa 10`,`execute @a[scores={clline5=-43}] ~~~ scoreboard players set @s cltpa 10`,`execute @a[scores={clline1=-43}] ~~~ scoreboard players reset @a clline1`,`execute @a[scores={clline2=-43}] ~~~ scoreboard players reset @a clline2`,`execute @a[scores={clline3=-43}] ~~~ scoreboard players reset @a clline3`,`execute @a[scores={clline4=-43}] ~~~ scoreboard players reset @a clline4`,`execute @a[scores={clline5=-43}] ~~~ scoreboard players reset @a clline5`,`execute @a[scores={clline1=..1}] ~~~ scoreboard players reset @a[scores={clline1=2},r=3] clline1`,`execute @a[scores={clline2=..1}] ~~~ scoreboard players reset @a[scores={clline2=2},r=3] clline2`,`execute @a[scores={clline3=..1}] ~~~ scoreboard players reset @a[scores={clline3=2},r=3] clline3`,`execute @a[scores={clline4=..1}] ~~~ scoreboard players reset @a[scores={clline4=2},r=3] clline4`,`execute @a[scores={clline5=..1}] ~~~ scoreboard players reset @a[scores={clline5=2},r=3] clline5`]);
}, 1);